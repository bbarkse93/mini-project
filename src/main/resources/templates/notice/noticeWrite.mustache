{{> layout/header}}

<div class="frame">
  <h1>채용공고 등록</h1>
  <form action="/noticeSave" method="POST" enctype="application/x-www-form-urlencoded">
    <h4 class="mt-4">공고 제목</h4>
    <input type="text" class="form-control input" id="recruitTitle" placeholder="Title" name="title" />

    <div class=".container-fluid d-flex">
      <div class="profile-image" style="margin-top: 20px; margin-right: 20px">
        <img class="image2" src="/images/너굴맨.jpg" name="companyPicUrl" />
      </div>
      <div class="recruit-info">
        <h4 class="mt-3">회사명</h4>
        <input type="text" class="form-control input" id="coName" placeholder="회사명을 입력하세요" name="companyName" />
        <h4 class="mt-3">이메일</h4>
        <input type="text" class="form-control input" id="coEmail" placeholder="이메일을 입력하세요" name="companyEmail" />
        <h4 class="mt-3">전화번호</h4>
        <input type="text" class="form-control input" id="coCallNumber" placeholder="전화번호를 입력하세요" name="phoneNumber" />
      </div>
    </div>


    <h4 class="mt-4">기업정보</h4>
    <input type="text" class="form-control input" id="coInfo" placeholder="정보를 입력하세요" name="companyInfo" />
    <h4 class="mt-4">지역</h4>
    <div class="d-flex justify-content-between">
      {{#locations}}
      <div class="form-check">
        <label class="form-check-label" for="radio{{id}}">{{locationName}}</label>
        <input type="radio" class="form-check-input" id="radio{{id}}" name="location" value="{{locationName}}" checked>
      </div>
      {{/locations}}
    </div>


    <hr />
    <h4 class="mt-4">채용직무</h4>
    <p>선택한 직무: <span id="selectedDevOptions">None</span></p>
    <div class="dropdown">
      <button class="btn btn-primary dropdown-toggle" type="button" id="devDropdownButton" data-bs-toggle="dropdown"
        aria-haspopup="true" aria-expanded="false">
        직무를 골라주세요
      </button>
      <ul class="dropdown-menu" aria-labelledby="devDropdownButton">
        {{#dutys}}
        <li>
          <label><input type="checkbox" class="dropdown-checkbox" value="{{dutyName}}" name="wishDutys" />
            {{dutyName}}</label>
        </li>
        {{/dutys}}
      </ul>
    </div>
    <h4 class="mt-4">기술 스택</h4>
    <p>필요한 기술: <span id="selectedTechOptions">None</span></p>
    <div class="dropdown">
      <button class="btn btn-primary dropdown-toggle" type="button" id="techDropdownButton" data-bs-toggle="dropdown"
        aria-haspopup="true" aria-expanded="false">
        기술스택을 선택하세요
      </button>
      <ul class="dropdown-menu" aria-labelledby="techDropdownButton">
        {{#skills}}
        <li>
          <label><input type="checkbox" class="dropdown-checkbox" value="{{skillName}}" name="wishSkills" />
            {{skillName}}
          </label>
        </li>
        {{/skills}}
      </ul>
    </div>
    <br>
    <hr />
    <div class="container">
      <div class="row">
        <div class="col-lg-6 mt-4">
          <h4>모집인원</h4>
          <input type="text" class="form-control input" placeholder="모집 인원을 기입해주세요" name="intake" />
          <h4 class="mt-4">급여</h4>
          <input type="text" class="form-control input" placeholder="연봉,급여를 등록해주세요" name="pay" />
        </div>
        <div class="col-lg-6 mt-4">
          <h4>기간</h4>
          <input type="text" class="form-control input" placeholder="모집 기간을 등록해주세요" name="period" />
          <h4 class="mt-4">자격요건</h4>
          <input type="text" class="form-control input" id="place" placeholder="사지멀쩡한 자" name="qualification" />
        </div>
      </div>
    </div>
    <div class="d-flex justify-content-center mt-5">
      <button type="submit" class="btn btn-primary" style="width: 50%">
        등록하기
      </button>
    </div>
  </form>
</div>

<script>
  function setupDropdown(dropdownId, outputId) {
    var dropdown = document.querySelector(`#${dropdownId}`);
    var dropdownItems =
      dropdown.nextElementSibling.querySelectorAll(".dropdown-checkbox");

    dropdown.addEventListener("click", function () {
      dropdownItems.forEach(function (item) {
        item.addEventListener("change", function () {
          updateSelectedOptions(outputId, dropdownItems);
        });
      });
    });
  }

  function updateSelectedOptions(outputId, checkboxList) {
    var selectedOptions = Array.from(checkboxList)
      .filter(function (checkbox) {
        return checkbox.checked;
      })
      .map(function (checkbox) {
        return checkbox.value;
      });

    var output = document.getElementById(outputId);
    if (selectedOptions.length > 0) {
      output.textContent = selectedOptions.join(", ");
    } else {
      output.textContent = "None";
    }
  }

  // Setup Dropdowns
  setupDropdown("devDropdownButton", "selectedDevOptions");
  setupDropdown("techDropdownButton", "selectedTechOptions");
</script>

{{> layout/footer}}